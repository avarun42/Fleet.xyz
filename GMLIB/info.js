gm.info=function(t){"use strict";function e(t,e,i,o){"object"==typeof e&&(o=i||!1,i=e),"boolean"==typeof e&&(o=e,e=gm.util.optionalMethod);var r=n.bind(null,t,o);return gm.vehicle.getCurrentPosition(r,e,i)}function n(t,e,n){function o(e){return e?(n={timestamp:n.timestamp,coords:{latitude:9999999999,longitude:9999999999,altitude:9999999,heading:-1}},void t(n)):t(n)}e&&(n.coords.latitude=i(n.coords.latitude),n.coords.longitude=i(n.coords.longitude)),gm.util.getGpsMaskingSupport()?gm.util.requestGpsMaskingState(o):t(n)}function i(t){return t/36e5}function o(t,e,i,o){"object"==typeof e&&(o=i||!1,i=e),"boolean"==typeof e&&(o=e,e=gm.util.optionalMethod);var r=n.bind(null,t,o);return gm.vehicle.watchPosition(r,e,i)}function r(t){return gm.vehicle.clearPosition(t)}function a(t,e,n){var i=u.bind(null,t);return"function"!=typeof e&&(n=e,e=gm.util.optionalMethod),"undefined"==typeof n||0===n.length?(gm.util.log("getVehicleData you must provide at least one vehicle data key"),e()):gm.vehicle.getVehicleData(i,e,n)}function c(t,e,n,i){var o=u.bind(null,t);return gm.vehicle.watchVehicleData(o,e,n,i)}function u(t,e){function n(n){if(!n)return t(e);for(var i in W)e.hasOwnProperty(i)&&(e[i]=W[i]);t(e)}gm.util.getGpsMaskingSupport()?gm.util.requestGpsMaskingState(n):t(e)}function g(t){return gm.vehicle.clearVehicleData(t)}function s(){return gm.vehicle.getVIN()}function l(t,e){return gm.communication.getRadioInfo(t,e)}function m(t,e){return gm.communication.watchRadioInfo(t,e)}function f(t){return gm.communication.clearRadioInfo(t)}function d(t,e,n){var i="function"==typeof gm.communication.getBTServices,o="function"==typeof e;return i?gm.communication.getBTServices(t,e,n):(o&&e(),void gm.util.log("getBTSServices is not supported on this radio"))}function h(t,e,n){var i="function"==typeof gm.communication.watchBTServices,o="function"==typeof e;return i?gm.communication.watchBTServices(t,e,n):(o&&e(),void gm.util.log("watchBTSServices is not supported on this radio"))}function p(t){var e="function"==typeof gm.communication.clearBTServices;return e?gm.communication.clearBTServices(t):void gm.util.log("clearBTSServices is not supported on this radio")}function v(t,e){return gm.hmi.watchProximity(t,e)}function y(t){return gm.hmi.clearProximity(t)}function M(){return gm.hmi.getUser()}function S(t,e){return e?e("Deprecated method"):t?t("Deprecated method"):void gm.util.log("getCountryCode is deprecated")}function T(t,e){return gm.hmi.watchActiveDeviceConnected(t,e)}function C(t){return gm.hmi.clearActiveDeviceConnected(t)}function w(t){return gm.hmi.clearButtons(t)}function D(t,e){gm.vehicle.getVehicleConfiguration(function(e){var n=parseFloat(e.apiVersion)+"."+gm.system._APP0_VERSION;"function"==typeof t?t(n):gm.util.log("getRealAPIVersion success should be a function")},e)}function E(t){return"function"!=typeof t?"0":void t("0")}function b(t){var e="function"==typeof gm.vehicle.getVersion;return e?gm.vehicle.getVersion(t):void gm.util.log("getVersion is not supported")}function k(t,e){var n=gm.hmi.getNetworkConnectivity();return"function"!=typeof t?n:void t(n)}function V(t,e){return gm.hmi.watchSteeringWheelControls(t,e)}function A(t){return gm.hmi.clearSteeringWheelControls(t)}function R(t,e,n){return gm.hmi.watchButtons(t,e,n)}function _(t,e){return gm.system.getAppConfig("AppVersionString",t,e)}function I(t,e){return gm.system.getAppConfig("AppVersion",t,e)}function N(t,e){function n(){return new Promise(function(t,e){function n(e){switch(e.region){case"Austrailia":e.region="Australia";break;case"Russsia":e.region="Russia";break;case"Caribean":e.region="Caribbean"}t(e)}function i(t){e("failed to start gm.vehicle.getVehicleConfiguration: ",t)}gm.vehicle.getVehicleConfiguration(n,i)})}e=e||gm.util.optionalMethod,Promise.all([n(),P()]).then(function(e){var n=gm.util.extend(e[0],e[1]);L.apiVersion=n.apiVersion,L.region=n.region,L.language=n.language,L.buttonsAvailable=n.buttonsAvailable,~L.gpsMaskingExclusionList.indexOf(L.region)?L.maskingFeature=!1:L.maskingFeature=!0,t(n)},function(t){e(t)})}function P(){return new Promise(function(t,e){function n(e){function n(t,e,n){var o=i[t.group]||{};o[t.key]=t.value,i[t.group]=o}clearTimeout(s),a.clearWatchForData(c);var i={},r=JSON.parse(e.data),u="db.get"===r.command&&r.data&&"configurations"===r.data.key;if(u){var g=JSON.parse(e.data).data.value;g=g||[],g.forEach(n);var l={appConfig:i};i.defaults&&(L.gpsMaskingExclusionList=i.defaults.gpsMaskingExclusionList),i.userSettings&&(L.gpsMaskingEnabled=i.userSettings.gpsMaskingEnabled),o(),~L.gpsMaskingExclusionList.indexOf(L.region)?L.maskingFeature=!1:L.maskingFeature=!0,t(l)}}function i(t){a.clearWatchForData(c),gm.util.log("failed to start watchForData in gm.info.getVehicleConfiguration: ",t)}function o(){gm.util.isUndefined(L.gpsMaskingEnabled)&&(L.gpsMaskingEnabled=gm.util.GPS_MASKING_DEFAULTS.ENABLED),gm.util.isUndefined(L.gpsMaskingExclusionList)&&(L.gpsMaskingExclusionList=gm.util.GPS_MASKING_DEFAULTS.EXCLUDED_REGIONS)}var r=JSON.stringify({command:"db.get",key:"configurations"}),a=gm.comm||gm.communication,c=a.watchForData(n,i),u=a.sendToApp(3,r.length,r),g={appConfig:{}};~[1,2,3,4].indexOf(u)&&(a.clearWatchForData(c),o(),t(g));var s=setTimeout(function(){a.clearWatchForData(c),o(),t(g)},2e3)})}function B(t,e){var n="?rand="+Math.round(1e5*Math.random()),i=U.GMT_PING_URL+n,o=new XMLHttpRequest;o.open("HEAD",i,!0),o.timeout=U.GMT_CON_TIMEOUT,o.onerror=o.ontimeout=function(){e("Network request timed out")},o.onreadystatechange=function(){var n;if(4===o.readyState)return o.abort(),n=Date.parse(o.getResponseHeader("Date")),isNaN(n)?e("Date returned is NaN"):void t(n)},o.send()}function G(t,e){e=e||gm.system._optionalMethod;try{B(t,function(){setTimeout(B,U.RETRY_TIME,t,function(){setTimeout(B,U.RETRY_TIME,t,e)})})}catch(t){e(t)}}function O(t,e){return F||(F=new gm.util.WatchManager({type:"single",watchMethod:function(t,e){return gm.hmi.watchRotaryControl(t,e)},clearMethod:function(t){return gm.hmi.clearRotaryControl(t)}})),F.add(t,e)}function x(t){return F.clear(t)}var F,L={maskingFeature:!0},U=Object.create(null,{GMT_CACHE_TIME:{value:3e4},GMT_CON_TIMEOUT:{value:1e4},GMT_PING_URL:{value:"http://www.gm.com"},RETRY_TIME:{value:5e3}}),W={gps_lat:9999999999,gps_long:9999999999,gps_elevation:9999999,gps_heading:-1};return{_CONSTANTS:U,getCurrentPosition:e,watchPosition:o,clearPosition:r,getVehicleData:a,watchVehicleData:c,clearVehicleData:g,getVIN:s,getVehicleConfiguration:N,getRadioInfo:l,watchRadioInfo:m,clearRadioInfo:f,getBTServices:d,watchBTServices:h,clearBTServices:p,watchProximity:v,clearProximity:y,watchRotaryControl:O,clearRotaryControl:x,getUser:M,getCountryCode:S,watchActiveDeviceConnected:T,clearActiveDeviceConnected:C,watchButtons:R,clearButtons:w,getRealAPIVersion:D,getAID:E,getVersion:b,getNetworkConnectivity:k,watchSteeringWheelControls:V,clearSteeringWheelControls:A,getVersionDisplayText:_,getMyVersion:I,getGMT:G,getConfigFromApp3:P,get vehicleConfig(){return L}}}();