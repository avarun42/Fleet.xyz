Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},r=function(){return n.apply(this instanceof o&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,r.prototype=new o,r}),function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function o(){}function r(){return function(){process.nextTick(c)}}function i(){var t=0,e=new P(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function a(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}function u(){return function(){setTimeout(c,1)}}function c(){for(var t=0;t<R;t+=2){var e=G[t],n=G[t+1];e(n),G[t]=void 0,G[t+1]=void 0}R=0}function s(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){try{return t.then}catch(t){return U.error=t,U}}function p(t,e,n,o){try{t.call(e,n,o)}catch(t){return t}}function m(t,e,n){D(function(t){var o=!1,r=p(n,e,function(n){o||(o=!0,e!==n?y(t,n):b(t,n))},function(e){o||(o=!0,_(t,e))},"Settle: "+(t._label||" unknown promise"));!o&&r&&(o=!0,_(t,r))},t)}function g(t,e){e._state===B?b(t,e._result):t._state===W?_(t,e._result):w(e,void 0,function(e){y(t,e)},function(e){_(t,e)})}function h(t,n){if(n.constructor===t.constructor)g(t,n);else{var o=f(n);o===U?_(t,U.error):void 0===o?b(t,n):e(o)?m(t,n,o):b(t,n)}}function y(e,n){e===n?_(e,l()):t(n)?h(e,n):b(e,n)}function v(t){t._onerror&&t._onerror(t._result),E(t)}function b(t,e){t._state===q&&(t._result=e,t._state=B,0===t._subscribers.length||D(E,t))}function _(t,e){t._state===q&&(t._state=W,t._result=e,D(v,t))}function w(t,e,n,o){var r=t._subscribers,i=r.length;t._onerror=null,r[i]=e,r[i+B]=n,r[i+W]=o,0===i&&t._state&&D(E,t)}function E(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var o,r,i=t._result,a=0;a<e.length;a+=3)o=e[a],r=e[a+n],o?C(n,o,r,i):r(i);t._subscribers.length=0}}function A(){this.error=null}function S(t,e){try{return t(e)}catch(t){return V.error=t,V}}function C(t,n,o,r){var i,a,u,c,s=e(o);if(s){if(i=S(o,r),i===V?(c=!0,a=i.error,i=null):u=!0,n===i)return void _(n,d())}else i=r,u=!0;n._state!==q||(s&&u?y(n,i):c?_(n,a):t===B?b(n,i):t===W&&_(n,i))}function T(t,e){try{e(function(e){y(t,e)},function(e){_(t,e)})}catch(e){_(t,e)}}function M(t,e,n,o){this._instanceConstructor=t,this.promise=new t(s,o),this._abortOnReject=n,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?b(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&b(this.promise,this._result))):_(this.promise,this._validationError())}function I(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this._id=Q++,this._state=void 0,this._result=void 0,this._subscribers=[],s!==t&&(e(t)||I(),this instanceof L||O(),T(this,t))}var j;j=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var N,k=j,R=(Date.now||function(){return(new Date).getTime()},Object.create||function(t){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof t)throw new TypeError("Argument must be an object");return o.prototype=t,new o},0),D=function(t,e){G[R]=t,G[R+1]=e,R+=2,2===R&&N()},F="undefined"!=typeof window?window:{},P=F.MutationObserver||F.WebKitMutationObserver,x="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=new Array(1e3);N="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?r():P?i():x?a():u();var q=void 0,B=1,W=2,U=new A,V=new A;M.prototype._validateInput=function(t){return k(t)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var X=M;M.prototype._enumerate=function(){for(var t=this.length,e=this.promise,n=this._input,o=0;e._state===q&&o<t;o++)this._eachEntry(n[o],o)},M.prototype._eachEntry=function(t,e){var o=this._instanceConstructor;n(t)?t.constructor===o&&t._state!==q?(t._onerror=null,this._settledAt(t._state,e,t._result)):this._willSettleAt(o.resolve(t),e):(this._remaining--,this._result[e]=this._makeResult(B,e,t))},M.prototype._settledAt=function(t,e,n){var o=this.promise;o._state===q&&(this._remaining--,this._abortOnReject&&t===W?_(o,n):this._result[e]=this._makeResult(t,e,n)),0===this._remaining&&b(o,this._result)},M.prototype._makeResult=function(t,e,n){return n},M.prototype._willSettleAt=function(t,e){var n=this;w(t,void 0,function(t){n._settledAt(B,e,t)},function(t){n._settledAt(W,e,t)})};var H=function(t,e){return new X(this,t,(!0),e).promise},Y=function(t,e){function n(t){y(i,t)}function o(t){_(i,t)}var r=this,i=new r(s,e);if(!k(t))return _(i,new TypeError("You must pass an array to race.")),i;for(var a=t.length,u=0;i._state===q&&u<a;u++)w(r.resolve(t[u]),void 0,n,o);return i},J=function(t,e){var n=this;if(t&&"object"==typeof t&&t.constructor===n)return t;var o=new n(s,e);return y(o,t),o},K=function(t,e){var n=this,o=new n(s,e);return _(o,t),o},Q=0,Z=L;L.all=H,L.race=Y,L.resolve=J,L.reject=K,L.prototype={constructor:L,then:function(t,e){var n=this,o=n._state;if(o===B&&!t||o===W&&!e)return this;var r=new this.constructor(s),i=n._result;if(o){var a=arguments[o-1];D(function(){C(o,r,a,i)})}else w(n,r,t,e);return r},catch:function(t){return this.then(null,t)}};var z=function(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var n="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var n;return new t.Promise(function(t){n=t}),e(n)}();n||(t.Promise=Z)},$={Promise:Z,polyfill:z};"function"==typeof define&&define.amd?define(function(){return $}):"undefined"!=typeof module&&module.exports?module.exports=$:"undefined"!=typeof this&&(this.ES6Promise=$)}.call(this),window.gm=window.gm||parent.gm||{},window.ES6Promise&&!window.Promise&&ES6Promise.polyfill(),gm.util=function(t){"use strict";function e(){}function n(){return gm.info.vehicleConfig.maskingFeature}function o(t){var e=document.getElementById(D.id);t=t||{};for(var n in D)t[n]&&(D[n]=t[n]);e&&r(e)}function r(t,e){"true"===e||e===!0?t.classList.add("gpsMaskingEnabled"):t.classList.remove("gpsMaskingEnabled");for(var n in D)t.style[n]=D[n]}function i(){var t=document.querySelector("#"+D.id);t.parentNode.removeChild(t)}function a(t){var e=document.querySelector("#"+D.id);return e?r(e,t):(e=document.createElement("button"),e.id=D.id,e.onclick=u,document.body.appendChild(e),void r(e,t))}function u(){c();var t=JSON.stringify({command:"deeplink",appID:"15",message:JSON.stringify({senderID:gm.system.getAppConfig("AppID"),page:"gps_masking"})}),e=(gm.comm||gm.communication).sendToApp(3,t.length,t);~[1,2,3,4].indexOf(e)&&s(),F=(gm.comm||gm.communication).watchForData(l)}function c(){var t=document.querySelector("#"+D.id);t.classList.add("spinner")}function s(){var t=document.querySelector("#"+D.id);t.classList.remove("spinner")}function l(t){var e=JSON.parse(t.data),n=gm.info.vehicleConfig.region,o=e&&"15"===e.senderID;o&&(s(),(gm.comm||gm.communication).clearWatchForData(F),"true"===e.gpsMaskingEnabled||e.gpsMaskingEnabled===!0?e.gpsMaskingEnabled=!0:e.gpsMaskingEnabled=!1,Array.isArray(e.gpsMaskingExclusionList)&&(gm.info.vehicleConfig.maskingFeature=!~e.gpsMaskingExclusionList.indexOf(n)),gm.info.vehicleConfig.gpsMaskingEnabled=e.gpsMaskingEnabled,gm.info.vehicleConfig.maskingFeature===!0?a(gm.info.vehicleConfig.gpsMaskingEnabled):i())}function d(t){function e(e){var n=gm.info.vehicleConfig.maskingFeature,o=gm.info.vehicleConfig.gpsMaskingEnabled&&n;a(o),n||i(),t(o)}t=t||gm.util.optionalMethod;gm.comm||gm.communication;gm.info.getConfigFromApp3().then(e)}function f(t){function e(e,u){var c;return u=u||m,a.length||(r=i=t.watchMethod(o,function(){n(c.id),u()})),c={id:r++,success:e,failure:u},a.push(c),c.id}function n(e){1===a.length&&t.clearMethod(i),a.forEach(function(t,n){t.id===e&&a.splice(n,1)})}function o(){var t,e=Array.prototype.slice.apply(arguments);u?a.forEach(function(t){t.success.apply(null,e)}):(t=a[a.length-1],t&&t.success.apply(null,e))}if(!b(t.watchMethod))throw new TypeError("config object requires watchMethod key {Function}");if(!b(t.clearMethod))throw new TypeError("config object requires clearMethod key {Function}");var r,i,a=[],u="single"!==t.type;this.add=e,this.clear=n}function p(){return gm.system.getAppConfig("AppCategory")}function m(){h("Optional, unprovided callback executed.",arguments)}function g(t){return"function"==typeof t?t:e}function h(){var t=[].slice.call(arguments);t.unshift("APP0 >>"),console.log.apply(console,t)}function y(t,e,n,o){o=o||{},o.request_id=k,e=g(e),n=g(n);var r=JSON.stringify({command:t,data:o});N[k]={success:e,failure:n},k++;var i=gm.communication.sendToApp(3,r.length,r);v(i,r),i&&n()}function v(t,e){var n=["sendToApp success","sendToApp failed: App not installed","sendToApp failed: App not started","sendToApp failed: Invalid data","sendToApp failed: App not watching for data"];h(n[t],e)}function b(t){return"function"==typeof t}function _(t){return"[object Object]"===Object.prototype.toString.call(t)}function w(t){return"number"==typeof t}function E(t){return"string"==typeof t}function A(e){return e===t}function S(t){return Array.isArray(t)}function C(t){return"boolean"==typeof t}function T(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];b(o)?e.push("f"):_(o)?e.push("o"):S(o)?e.push("o"):w(o)?e.push("n"):E(o)?e.push("s"):C(o)?e.push("b"):A(o)&&e.push("u")}return e.join("")}function M(t,e){return t===e}function I(t){var e=R.call(arguments,1);return e.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t}var O=Object.create(null,{INVALID_SIGNATURE:{value:0},NOT_SUPPORTED:{value:1},NOT_INITIALIZED:{value:2},FORBIDDEN_CONTENT:{value:3},REQUEST_TIMEOUT:{value:4},INVALID_OPTIONS:{value:5}}),L=Object.create(null,{HIGH:{value:1e3},MEDIUM:{value:5e3},LOW:{value:1e4}}),j=Object.create(null,{ENABLED:{value:!1},EXCLUDED_REGIONS:{value:["USA","Canada"]}}),N={},k={},R=Array.prototype.slice,D=Object.create(Object.prototype,{id:{value:"gpsMaskingIcon"},top:{value:null,enumerable:!0,writable:!0},right:{value:null,enumerable:!0,writable:!0},bottom:{value:null,enumerable:!0,writable:!0},left:{value:null,enumerable:!0,writable:!0}}),F=0;return{sendToApp3:y,EXCEPTIONS:O,POLLING:L,GPS_MASKING_DEFAULTS:j,extend:I,noop:e,log:h,isFunction:b,isObject:_,isNumber:w,isString:E,isUndefined:A,isBoolean:C,getSig:T,matchesSig:M,optionalMethod:m,handleOptionalMethod:g,WatchManager:f,getAppType:p,getGpsMaskingSupport:n,requestGpsMaskingState:d,setGpsButtonConfig:o,removeSpinner:s}}();const GMLIB_ROTARY_CLASS="gmlib-rotary-focus";gm.system=function(t){"use strict";function e(t,e,n,o){function r(){return l.send(),s=a(l),u(s),L[t]}function i(){l.onload=function(){return this.responseXML&&this.responseXML.childNodes?this.responseXML.childNodes.length?(s=a(this),s.length?([].forEach.call(s,function(t){L[t.nodeName]=t.textContent}),n(L[t])):o("No child nodes found")):o("No root element found"):o("No response xml found")},l.onerror=function(){o("GMapp request failed!")},l.send()}function a(t){return t.responseXML.childNodes[0].childNodes}function u(t){[].forEach.call(t,function(t){L[t.nodeName]=t.textContent})}var c=!!n;if(o=o||gm.util.optionalMethod,L.hasOwnProperty(t))return n?n(L[t]):L[t];var s,l=new(XMLHttpRequest.noConflict||XMLHttpRequest);return l.open("GET",e||"gmapp.xml",c),l.setRequestHeader("Content-Type","text/xml"),c?void i():r()}function n(t,n,o){function r(){e(t,"../gmapp.xml",n,o)}if(!n)try{return e(t,null)}catch(t){return r()}return e(t,null,n,r)}function o(e,n){function o(e,n){return e.dataset.rotaryIndex===t&&n.dataset.rotaryIndex===t?0:e.dataset.rotaryIndex&&n.dataset.rotaryIndex===t?-1:e.dataset.rotaryIndex===t&&n.dataset.rotaryIndex?1:e.dataset.rotaryIndex-n.dataset.rotaryIndex}var i;n=n||!1,R=[],D=0,j=null;var a=function(t){var e=!0,n=getComputedStyle(t,null),o="hidden"===n.getPropertyValue("visibility"),r="none"===n.getPropertyValue("display");return(0===t.offsetHeight||o||r||t.className&&t.className.match(/\s*hidden\s*/gi))&&(e=!1),e};"boolean"==typeof e?(n=e,i=document.body):(i=document.getElementById(e),i=i||document.body);try{for(var u=i.querySelectorAll("[data-gm_rotary='1'],input:not([data-gm_rotary='0']),button:not([data-gm_rotary='0']),select:not([data-gm_rotary='0']),a:not([data-gm_rotary='0']),textarea:not([data-gm_rotary='0'])"),c=u.length,s=0;s<c;s++)a(u[s])&&(R.push(u[s]),u[s]===j&&(D=R.length-1));R.sort(o),n&&R.length&&(D=R.length,j=R[R.length-1],r(gm.constants.button.RC_CW))}catch(t){return void gm.util.log("App 0 >> Default Rotary: Indexing Elements Failed")}}function r(t){if(!(R.length<1))switch("object"==typeof t&&(t=t[0]),t){case gm.constants.button.RC_CW:j?(j.classList.remove(GMLIB_ROTARY_CLASS),D>=R.length-1?D=0:D+=1):D=0,R&&(j=R[D],j.classList.add(GMLIB_ROTARY_CLASS));break;case gm.constants.button.RC_CCW:j?(j.classList.remove(GMLIB_ROTARY_CLASS),D<=0?D=R.length-1:D-=1):D=R.length-1,R&&(j=R[D],j.classList.add(GMLIB_ROTARY_CLASS));break;case gm.constants.button.RC_SELECT:if(j){var e=j,n=function(){o=document.createEvent("MouseEvent"),o.initEvent("mouseup",!0,!1),e.dispatchEvent(o),o=document.createEvent("MouseEvent"),o.initEvent("click",!0,!1),e.dispatchEvent(o)},o=document.createEvent("MouseEvent");o.initEvent("mousedown",!0,!1),e.dispatchEvent(o),setTimeout(n,100)}break;default:gm.util.log("App 0 >> Default Rotary:Non Supported Rotary Event Fired:"+t)}}function i(t){function e(t){document.querySelector("#gpsMaskingIcon")&&(gm.util.removeSpinner(),0===t&&gm.util.requestGpsMaskingState())}function n(){gm.util.log("#init watch focus failure")}function i(e){if(U=e.buttonsAvailable.RC_SELECT,U&&t.defaultRotary&&(o(),N||(N=gm.info.watchRotaryControl(r,a))),k=parseFloat(e.apiVersion),!document.getElementById("themeTag")){var n=document.createElement("link");n.id="themeTag",n.type="text/css",n.href="GMLIB/themes/defaultTheme/theme.css",n.rel="stylesheet",document.head.appendChild(n)}gm.util.log("<<< system.init SUCCESS")}function a(){gm.util.log("<<< system.init FAILED")}gm.util.log(">> system.init. Release Build "+gm.GMLIB_RELEASE_VERSION),t=gm.util.extend({defaultRotary:!0},t),w({appStartTime:Date.now()}),gm.system.watchFocus(e,n),(gm.info||gm.vehicle).getVehicleConfiguration(i,a),gm.util.log("<< system.init.")}function a(t,e){return e=e||gm.util.optionalMethod,B.add(function(n){var o=0===n||1===n;return o?t(n):e()},e)}function u(t){return B.clear(t)}function c(t,e){return q.add(t,e)}function s(){return gm.vehicle.getSpeed()}function l(t){q.clear(t)}function d(t){if("string"==typeof t){var e=0===(t.match(F)||[]).length;return e}if("object"==typeof t){for(var n in t)if(!d(t[n]))return!1;return!0}}function f(t,e){return t=t||gm.util.optionalMethod,e=e||gm.util.optionalMethod,gm.appmanager.requestFocus(t,e)}function p(t){w({appCloseTime:Date.now()}),setTimeout(function(){return gm.appmanager.closeApp(t)},500)}function m(t,e){return gm.appmanager.setShutdown(t,e)}function g(t){return gm.vehicle.getDTCTableEntry(t||{})}function h(t,e,n){return gm.vehicle.watchDTCTableEntry(t,e,n)}function y(t){return gm.vehicle.clearDTCTableWatch(t)}function v(t,e){return gm.appmanager.releaseFocus(t,e)}function b(t,e){return gm.appmanager.changeFriendlyName(t,e)}function _(t,e){return gm.appmanager.changeIcon(t,e)}function w(t){if("object"!=typeof t)return void gm.util.log("Parameter should be an object");var e=gm.comm||gm.communication,n=JSON.stringify({analytics:t});return e.sendToApp(14,n.length,n)}function E(t){if("object"!=typeof t)return void gm.util.log("customTracking parameter should be an object");var e={aoad:t};w(e)}function A(t){this.activeWidget=t}function S(){this.activeWidget=null}function C(){var t=!1;window.parent.Emulator||(window.addEventListener("blur",function(){"general"===gm.util.getAppType()?gm.appmanager.closeApp():(t===!1&&(t=document.body.style.display),document.body.style.display="none")}),window.addEventListener("focus",function(){t!==!1&&(document.body.style.display=t,t=!1)}))}function T(t,e){"function"!=typeof t&&(e=t,t=gm.system._optionalMethod);var n=O(),r=I(function(){M(r,n,t,e)});o(r.id)}function M(t,e,n,r){var i,a=document.getElementById("gmlib_dialogue_backgroundCover"),u=!0;if(a.parentElement.removeChild(a),t.parentElement.removeChild(t),o(),e.parentNode.removeChild(e),!r)return n(u);if(i=new XMLHttpRequest,i.open(r.method||"GET",r.url||r,!0),r.headers)for(var c in r.headers)i.setRequestHeader(c,r.headers[c]);i.timeout=r.timeout||0,i.onload=function(){return u=900===i.status,n(u)},i.onerror=i.ontimeout=function(){return n(u)},i.send()}function I(t){var e=document.createDocumentFragment(),n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("p"),i=document.createElement("button"),a=document.createElement("button"),u=document.createElement("section"),c=u.cloneNode(),s=u.cloneNode();return o.id="gmlib_dialogue_backgroundCover",o.className="gmlib_dialogue_background",u.className="gmlib_header",c.className="gmlib_body",s.className="gmlib_footer",i.className="gmlib_button",n.id="gmlib_outofdata_dialogue",i.id="gmlib_outofdata_ok",a.id="gmlib_outofdata_close",r.id="gmlib_outofdata_msg",i.onclick=a.onclick=t,r.innerHTML="Press the blue button<br />Then select OK to continue",i.innerHTML="OK",o.appendChild(n),e.appendChild(o),u.appendChild(a),c.appendChild(r),s.appendChild(i),n.appendChild(u),n.appendChild(c),n.appendChild(s),document.body.appendChild(e),n}function O(){var t="gmlib_dialogue_stylesheet",e=document.getElementById(t);if(e)return e;var n=document.createDocumentFragment();return e=document.createElement("link"),e.href="GMLib/themes/defaultTheme/dialogue.css",e.type="text/css",e.rel="stylesheet",e.id=t,n.appendChild(e),document.head.appendChild(n),e}var L={};gm._dataIsValid=d;var j,N,k,R=[],D=0,F=/(<script|<\/script|javascript\s*:|eval\s*\(|window\s*\.\s*attachEvent|window\s*\.\s*createRequest|window\s*\.\s*document|window\s*\.\s*frame|window\s*\.\s*location|window\s*\.\s*open|window\s*\.\s*setInterval|window\s*\.\s*setTimeout|<applet|<form|<\/form|<object|function\(|function\s.*\(|document\.\S|text\/javascript)/gim,P=1,x=gm.GMLIB_RELEASE_VERSION,G=gm.GMLIB_GMAPP_VERSION,q=new gm.util.WatchManager({watchMethod:function(t,e){return gm.vehicle.watchSpeed(t,e)},clearMethod:function(t){return gm.vehicle.clearSpeed(t)}}),B=new gm.util.WatchManager({watchMethod:gm.appmanager.watchFocus,clearMethod:function(t){gm.appmanager.clearFocus(t)}}),W=!1,U=!1;return{_EXCEPTIONS:gm.util.EXCEPTIONS,_POLLING:gm.util.POLLING,get allRotaryElements(){return R},get currentRotaryElementIndex(){return D},get activeRotaryElement(){return j},get _API_VERSION(){return k},get _APP0_VERSION(){return P},get _CACHED_VERSION_DISPLAY_TEXT(){return x},get _CACHED_MY_VERSION_TEXT(){return G},get nonApp0RotaryActive(){return W},get isRotary(){return U},indexElementsForDefaultRotary:o,init:i,watchFocus:a,clearFocus:u,watchSpeed:c,getSpeed:s,clearSpeed:l,dataIsValid:d,requestFocus:f,closeApp:p,setShutdown:m,getDTCTableEntry:g,watchDTCTableEntry:h,clearDTCTableWatch:y,releaseFocus:v,changeFriendlyName:b,changeIcon:_,_handleWatchForRotary:r,getAppConfig:n,outOfData:T,_optionalMethod:gm.util.optionalMethod,_log:gm.util.log,_getSig:gm.util.getSig,_matchesSig:gm.util.matchesSig,_send:gm.util.sendToApp3,registerActiveWidget:A,unRegisterActiveWidget:S,closeBackgroundApp:C,customTracking:E}}();